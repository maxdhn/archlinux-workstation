- name: Setup
  hosts: all
  pre_tasks:
  - name: Ensure package repository is up-to-date
    include_role:
      name: update_repo
  vars:
    ansible_user: '{{ unix_username }}'
    ansible_ssh_pass: '{{ unix_password }}'
  roles:
    - role: aur
    - role: browser
    - role: cli
    - role: dev
    - role: display
    - role: dotfiles
    - role: editor
    - role: font
    - role: git
    - role: misc
    - role: notification
    - role: ops
    - role: rust
    - role: sound
    - role: term

- name: Disable ssh
  hosts: all
  vars:
    ansible_user: '{{ unix_username }}'
    ansible_ssh_pass: '{{ unix_password }}'
  become: true
  tasks:
    - name: Disable ssh systemd services
      ansible.builtin.systemd:
        name: sshd
        enabled: false
